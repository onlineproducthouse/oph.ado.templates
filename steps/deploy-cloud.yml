parameters:
  # Leave empty if root, e.g. '.'
  # Terraform execution directory.
  # Name of directory to pass to `-chdir`, e.g. $(Build.SourcesDirectory)/module
  - name: tfChildDir
    type: string
    default: .

  - name: dotEnvFileArtifactPath
    type: string

steps:
  - name: DeployCloud
    script: |
      source $(echo "${{ parameters.dotEnvFileArtifactPath }}") \
        && terraform -chdir=${{ parameters.tfChildDir }} apply tfplan -auto-approve
