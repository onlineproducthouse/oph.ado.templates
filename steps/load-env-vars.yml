parameters:
  - name: awsRegion
    type: string
    default: ""

  - name: awsSSMParamPath # semi-colon separated list, e.g. "path1;path2;..."
    type: string
    default: ""

  - name: loadEnvVarScriptUrl
    type: string
    default: ""

  - name: loadEnvVarScriptPath
    type: string

steps:
  - displayName: load env variables
    script: |
      aws s3 cp $(echo "${{ parameters.loadEnvVarScriptUrl }}") $(echo "${{ parameters.loadEnvVarScriptPath }}")
      source $(echo "${{ parameters.loadEnvVarScriptPath }}") \
        ${{ parameters.awsRegion }} \
        ${{ parameters.awsSSMParamPath }} \
        $(pwd)
